"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6039],{1693:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>c});var i=s(6383),r=s(4848),t=s(8453);const a={slug:"/how-rails-routes-work",title:"From Path to Action - The Magic of Rails Routing",authors:"pradnyesh",tags:["rails","routing","action-dispatch","controller"]},l="Introduction",o={authorsImageUrls:[void 0]},c=[];function h(e){const n={a:"a",code:"code",h1:"h1",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Have you ever wondered ",(0,r.jsxs)(n.strong,{children:["how a request like ",(0,r.jsx)(n.code,{children:"/users/5"})," magically ends up calling ",(0,r.jsx)(n.code,{children:"UsersController#show"})]})," in a Rails application?"]}),"\n",(0,r.jsxs)(n.p,{children:["Well, it's not magic \u2014 it's ",(0,r.jsx)(n.strong,{children:"Action Dispatch"})," behind the scenes doing the heavy lifting!"]}),"\n",(0,r.jsx)(n.p,{children:"In this blog, let\u2019s break down how Rails handles routing, from the moment a request hits your server, to the moment your controller action is executed."}),"\n",(0,r.jsx)(n.h1,{id:"1-what-happens-when-you-hit-a-url",children:"1. What happens when you hit a URL?"}),"\n",(0,r.jsx)(n.p,{children:"Let\u2019s say you open your browser and type:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"https://example.com/users/5"})}),"\n",(0,r.jsxs)(n.p,{children:["This sends an ",(0,r.jsx)(n.strong,{children:"HTTP GET request"})," to your Rails server. From there, several things happen:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Rack"})," receives the request."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Action Dispatch"})," takes over and figures out which controller and action to run."]}),"\n",(0,r.jsx)(n.li,{children:"The matched controller\u2019s action is executed, and a response is sent back."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"But let\u2019s go step by step."}),"\n",(0,r.jsx)(n.h1,{id:"2-rails-is-built-on-rack",children:"2. Rails is built on Rack"}),"\n",(0,r.jsxs)(n.p,{children:["Rails is a ",(0,r.jsx)(n.strong,{children:"Rack-based"})," framework."]}),"\n",(0,r.jsxs)(n.p,{children:["Rack is a simple Ruby interface between web servers and Ruby web applications. Every Rails app starts with a ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"config.ru"})})," file, which tells Rack how to boot your app:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:"require_relative 'config/environment'\nrun Rails.application\n"})}),"\n",(0,r.jsx)(n.p,{children:"So when a request comes in, Rack calls Rails.application.call(env) and hands over the request."}),"\n",(0,r.jsx)(n.h1,{id:"3-enter-action-dispatch-routing-the-request",children:"3. Enter Action Dispatch: Routing the Request"}),"\n",(0,r.jsxs)(n.p,{children:["Now, Rails.application is an instance of the class Rails::Application, and it includes a middleware stack \u2014 one of which is ",(0,r.jsx)(n.strong,{children:"ActionDispatch::Routing::RouteSet"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"This is where routing magic begins."}),"\n",(0,r.jsx)(n.p,{children:"Your config/routes.rb file defines all available routes."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"ActionDispatch::Routing::RouteSet"})," uses this definition to match the incoming path (/users/5) and HTTP method (GET)."]}),"\n",(0,r.jsx)(n.p,{children:"Once a match is found, it maps it to something like:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:'{ controller: "users", action: "show", id: "5" }\n'})}),"\n",(0,r.jsx)(n.p,{children:"This is called route recognition."}),"\n",(0,r.jsx)(n.h1,{id:"4-dispatching-to-the-right-controller",children:"4. Dispatching to the Right Controller"}),"\n",(0,r.jsx)(n.p,{children:"After the route is recognized, Rails needs to dispatch the request to the correct controller and action."}),"\n",(0,r.jsxs)(n.p,{children:["This is handled by ",(0,r.jsx)(n.strong,{children:"ActionDispatch::Routing::RouteSet::Dispatcher"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Here\u2019s what happens:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["It takes the controller name (e.g., ",(0,r.jsx)(n.code,{children:'"users"'}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["It turns that into a constant (",(0,r.jsx)(n.code,{children:"UsersController"}),")."]}),"\n",(0,r.jsx)(n.li,{children:"It creates an instance of that controller."}),"\n",(0,r.jsxs)(n.li,{children:["It calls the ",(0,r.jsx)(n.code,{children:"show"})," action on it with the provided ",(0,r.jsx)(n.code,{children:"id"})," param."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["So, this line in ",(0,r.jsx)(n.code,{children:"routes.rb"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:"get '/users/:id', to: 'users#show'\n"})}),"\n",(0,r.jsx)(n.p,{children:"Turns into:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:"UsersController.new.show(params)\n"})}),"\n",(0,r.jsx)(n.p,{children:"(Of course, in reality, there\u2019s more middleware, filters, and view rendering, but conceptually this is what happens.)"}),"\n",(0,r.jsx)(n.h1,{id:"5-params-and-url-helpers",children:"5. Params and URL Helpers"}),"\n",(0,r.jsxs)(n.p,{children:["During routing, Rails also extracts route parameters (like ",":id",") and puts them into the params hash, which your controller can access easily."]}),"\n",(0,r.jsxs)(n.p,{children:["And thanks to route definitions, Rails can ",(0,r.jsx)(n.strong,{children:"generate"})," URLs using route helpers:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:'user_path(5)  # => "/users/5"\n'})}),"\n",(0,r.jsx)(n.p,{children:"This works because of Named Routes."}),"\n",(0,r.jsx)(n.h1,{id:"6-middleware-stack-the-unsung-heroes",children:"6. Middleware Stack: The Unsung Heroes"}),"\n",(0,r.jsx)(n.p,{children:"Before your controller is even hit, the request passes through a stack of middleware defined in:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:"Rails.application.middleware\n"})}),"\n",(0,r.jsx)(n.p,{children:"These include things like:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Logging"}),"\n",(0,r.jsx)(n.li,{children:"Caching"}),"\n",(0,r.jsx)(n.li,{children:"Session handling"}),"\n",(0,r.jsx)(n.li,{children:"Cookies"}),"\n",(0,r.jsx)(n.li,{children:"Parameter parsing"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Once all these layers are done, the request finally reaches your controller."}),"\n",(0,r.jsx)(n.h1,{id:"summary-rails-routing-in-a-nutshell",children:"Summary: Rails Routing in a Nutshell"}),"\n",(0,r.jsxs)(n.p,{children:["When you hit ",(0,r.jsx)(n.code,{children:"/users/5"}),", this happens behind the scenes:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Rack"})," receives the request."]}),"\n",(0,r.jsxs)(n.li,{children:["Rails passes it to ",(0,r.jsx)(n.strong,{children:"Action Dispatch"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"routes.rb"})," matches the URL to a controller and action."]}),"\n",(0,r.jsx)(n.li,{children:"Rails creates a controller instance."}),"\n",(0,r.jsxs)(n.li,{children:["The action (",(0,r.jsx)(n.code,{children:"show"}),") is executed."]}),"\n",(0,r.jsx)(n.li,{children:"Response is generated and returned."}),"\n"]}),"\n",(0,r.jsx)(n.h1,{id:"bonus-tip-view-all-routes-in-your-app",children:"Bonus Tip: View All Routes in Your App"}),"\n",(0,r.jsx)(n.p,{children:"You can run this command to see all routes in your Rails app:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:"$ rails routes\n"})}),"\n",(0,r.jsx)(n.p,{children:"Or use grep to search:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:"$ rails routes | grep users\n"})}),"\n",(0,r.jsx)(n.h1,{id:"conclusion",children:"Conclusion"}),"\n",(0,r.jsx)(n.p,{children:"I hope this helped you understand the beautiful flow of how Rails handles routing using Action Dispatch. If you\u2019re curious, try exploring the source code inside the actionpack gem \u2014 it\u2019s super well organized!"}),"\n",(0,r.jsxs)(n.p,{children:["Let\u2019s connect on ",(0,r.jsx)(n.a,{href:"https://www.linkedin.com/in/pradnyeshpatil27/",children:"LinkedIn"})," if you have any questions or want to chat more about Ruby on Rails."]})]})}function d(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},6383:e=>{e.exports=JSON.parse('{"permalink":"/blog/how-rails-routes-work","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2025-07-19-how-routes-actually-works-in-rails.md","source":"@site/blog/2025-07-19-how-routes-actually-works-in-rails.md","title":"From Path to Action - The Magic of Rails Routing","description":"Have you ever wondered how a request like /users/5 magically ends up calling UsersController#show in a Rails application?","date":"2025-07-19T00:00:00.000Z","tags":[{"inline":false,"label":"Rails","permalink":"/blog/tags/rails","description":"Ruby on Rails is a server-side web application framework written in Ruby under the MIT License. Rails is a model\u2013view\u2013controller framework, providing default structures for a database, a web service, and web pages."},{"inline":true,"label":"routing","permalink":"/blog/tags/routing"},{"inline":true,"label":"action-dispatch","permalink":"/blog/tags/action-dispatch"},{"inline":true,"label":"controller","permalink":"/blog/tags/controller"}],"readingTime":3.12,"hasTruncateMarker":true,"authors":[{"name":"Pradnyesh Patil","title":"Full stack developer.","url":"https://github.com/pradnyeshpatil","github":"pradnyeshpatil","linkedin":"https://www.linkedin.com/in/pradnyeshpatil27/","imageURL":"https://avatars.githubusercontent.com/u/46282630?s=400&u=2ba684f13f0864d5aaccbd09719f0ed7c2283068&v=4","key":"pradnyesh","page":null}],"frontMatter":{"slug":"/how-rails-routes-work","title":"From Path to Action - The Magic of Rails Routing","authors":"pradnyesh","tags":["rails","routing","action-dispatch","controller"]},"unlisted":false,"nextItem":{"title":"How to create and use Rake task in ruby and use it in the Rails?","permalink":"/blog/how-to-create-rake-task"}}')},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>l});var i=s(6540);const r={},t=i.createContext(r);function a(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);