"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6464],{4518:e=>{e.exports=JSON.parse('{"permalink":"/blog/how-to-create-rake-task","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2023-10-4-how-to-create-rake-task.md","source":"@site/blog/2023-10-4-how-to-create-rake-task.md","title":"How to create and use Rake task in ruby and use it in the Rails?","description":"Sometimes, We need to have a task that can be executed at regular basic at some time. In ruby, we have a rake task to define and execute this task at any time. We can use rake tasks in Rails for various purposes.","date":"2023-10-04T00:00:00.000Z","tags":[{"inline":false,"label":"Rails","permalink":"/blog/tags/rails","description":"Ruby on Rails is a server-side web application framework written in Ruby under the MIT License. Rails is a model\u2013view\u2013controller framework, providing default structures for a database, a web service, and web pages."},{"inline":false,"label":"Ruby","permalink":"/blog/tags/ruby","description":"A dynamic, open source programming language with a focus on simplicity and productivity. It has an elegant syntax that is natural to read and easy to write."}],"readingTime":2.19,"hasTruncateMarker":true,"authors":[{"name":"Pradnyesh Patil","title":"Full stack developer.","url":"https://github.com/pradnyeshpatil","github":"pradnyeshpatil","linkedin":"https://www.linkedin.com/in/pradnyeshpatil27/","imageURL":"https://avatars.githubusercontent.com/u/46282630?s=400&u=2ba684f13f0864d5aaccbd09719f0ed7c2283068&v=4","key":"pradnyesh","page":null}],"frontMatter":{"slug":"/how-to-create-rake-task","title":"How to create and use Rake task in ruby and use it in the Rails?","authors":"pradnyesh","tags":["rails","ruby"]},"unlisted":false,"nextItem":{"title":"Postgres users and their permission issue.","permalink":"/blog/postgres-permission-denied"}}')},6364:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>n,toc:()=>d});var n=a(4518),s=a(4848),i=a(8453);const r={slug:"/how-to-create-rake-task",title:"How to create and use Rake task in ruby and use it in the Rails?",authors:"pradnyesh",tags:["rails","ruby"]},o="Introduction",l={authorsImageUrls:[void 0]},d=[{value:"How to define custom rake tasks in Rails?",id:"how-to-define-custom-rake-tasks-in-rails",level:2}];function c(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"Sometimes, We need to have a task that can be executed at regular basic at some time. In ruby, we have a rake task to define and execute this task at any time. We can use rake tasks in Rails for various purposes."}),"\n",(0,s.jsxs)(t.p,{children:["Rake is inspired by Linux ",(0,s.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Make_(software)",children:"make utility"}),". Its name comes from the ",(0,s.jsx)(t.code,{children:"Ruby Make"}),". Rake is a task management utility that reads and executes the tasks defined in the ruby language in the 'Rakefile`. It was written by the late ",(0,s.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Jim_Weirich",children:"Jim Weirich"}),"."]}),"\n",(0,s.jsx)(t.h1,{id:"how-to-create-a-rake-task",children:"How to create a Rake task."}),"\n",(0,s.jsxs)(t.p,{children:["Create a file with the name 'Rakefile' and write the following content in it.\n",(0,s.jsx)(t.code,{children:" $ touch Rakefile"})]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"desc 'print hello world'\ntask :hello_world do\n  puts 'Hello world from Rubyist'\nend\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Here ",(0,s.jsx)(t.code,{children:"desc"})," command defines the description of the task and ",(0,s.jsx)(t.code,{children:"task"}),' command defines the actual task that needs to be executed. Here we are defining a simple task which is printing "Hello world from Rubyist.".']}),"\n",(0,s.jsx)(t.p,{children:"If you are in the directory containing the Rakefile then you can execute the following commands:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"$ rake --task              This command will show all the tasks defined in the Rakefile along with its description.\n=> rake hello_world        # Print hello world\n"})}),"\n",(0,s.jsx)(t.p,{children:"Now we can execute the task using the following command"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"$ rake hello_world\n=> Hello world from Rubyist\n"})}),"\n",(0,s.jsx)(t.p,{children:"We can also use namespace while defining the Rake task add the following code to Rakefile:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"desc 'Display files from the current directory'\nnamespace :admin do\n  task :display_files do\n    system('ls')\n  end\nend\n"})}),"\n",(0,s.jsx)(t.p,{children:"Let's see all tasks once again:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"$ rake --task\n=> rake admin:display_files  # Display files from the current directory\n   rake hello_world          # print hello world\n"})}),"\n",(0,s.jsx)(t.p,{children:"We can execute this task as follows:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"$ rake admin:hello_world\n(It should display files from your current directory)\n"})}),"\n",(0,s.jsx)(t.p,{children:"Namespacing to rake task is always good when the number of tasks is more and also it separates the context of the task."}),"\n",(0,s.jsx)(t.p,{children:"In the Rails project we can see many rake tasks as following:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["rails db",":migrate"]}),"\n",(0,s.jsx)(t.li,{children:"rails routes"}),"\n",(0,s.jsxs)(t.li,{children:["rake tmp",":clear"]}),"\n",(0,s.jsxs)(t.li,{children:["rake tmp",":create"]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["We can find out many more tasks by executing ",(0,s.jsx)(t.code,{children:"rake --task"})," command in the Rails application root directory."]}),"\n",(0,s.jsx)(t.h2,{id:"how-to-define-custom-rake-tasks-in-rails",children:"How to define custom rake tasks in Rails?"}),"\n",(0,s.jsxs)(t.p,{children:["We can create file with ",(0,s.jsx)(t.code,{children:".rake"})," extension in ",(0,s.jsx)(t.code,{children:"/lib/tasks/"})," folder."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"# lib/tasks/clear_logs.rake\n\nnamespace :Logs do\n  desc 'clear the log files'\n  task clear: :environment do\n    Dir[\"log/*.log\"].each do |file|\n       File.unlink(file)\n    end\n  end\nend\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Above task is deleting all files from ",(0,s.jsx)(t.code,{children:"log directory"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"Now we can simply execute this task as following:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"$ rake Logs:clear\n"})}),"\n",(0,s.jsxs)(t.p,{children:["I hope you loved it.\nPlease feel free to contact me on ",(0,s.jsx)(t.a,{href:"https://x.com/Shyampa09340219",children:"twitter"}),"."]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,t,a)=>{a.d(t,{R:()=>r,x:()=>o});var n=a(6540);const s={},i=n.createContext(s);function r(e){const t=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);